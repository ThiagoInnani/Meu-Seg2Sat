import{S as ne,i as ie,s as ce,e as z,k as B,c as C,a as M,m as j,d as I,b as s,K as Re,g as Q,J as c,t as G,h as F,L as H,E as W,M as Le,N as J,O as Z,P as be,Q as ye,j as Me,f as Ye,R as ae,T as Pe,U as Ue,V as it,W as Be,w as de,x as fe,y as he,q as ve,o as me,B as ge,v as ct}from"../chunks/index-bcf2726a.js";import{w as se,b as ot}from"../chunks/paths-d3bcbd10.js";const ze=[{color:[219,14,154],label:"building"},{color:[147,142,123],label:"pervious surface"},{color:[248,12,0],label:"impervious surface"},{color:[169,113,1],label:"bare soil"},{color:[21,83,174],label:"water"},{color:[25,74,38],label:"coniferous"},{color:[70,228,131],label:"deciduous"},{color:[243,166,13],label:"brushwood"},{color:[102,0,130],label:"vineyard"},{color:[85,255,0],label:"herbaceous vegetation"},{color:[255,243,13],label:"agricultural land"},{color:[228,223,124],label:"plowed land"},{color:[61,230,235],label:"swimming pool"},{color:[255,255,255],label:"snow"},{color:[138,179,160],label:"clear cut"},{color:[107,113,79],label:"mixed"}],ut="https://zqz606ggn85ysase.us-east-1.aws.endpoints.huggingface.cloud",je=["/samples/default.jpg","/samples/example0.png","/samples/example1.png","/samples/example2.png","/samples/example3.png","/samples/example4.png","/samples/example5.png","/samples/example6.jpg"],Ee=[["High resolution satellite image, 4K, ultra detailed","Realistic"],["Colorful lego bricks","Lego brick"],["Black and white paper pencil drawing","Pencil"],["Oil on canvas painting","Painting"]];function at(){return BigInt(0xb7dd73e137d20800&((1<<63)-1)*Math.random())}const xe=se(new Map),Ae=se(),De=se(),Ne=se(),ke=se(),Se=se({prompt:"Aerial view of rue des Lilas, Toulouse, Haute-Garonne, France",modifier:Ee[0][0],seed:at(),steps:20}),we=se(!1),Ce=se(!1);function $e(l,e,t){const r=l.slice();return r[3]=e[t],r[5]=t,r}function Je(l){let e,t,r,a,o,n,p,d,k,y,b,P;return{c(){e=z("div"),t=z("input"),n=B(),p=z("label"),d=z("img"),P=B(),this.h()},l(g){e=C(g,"DIV",{class:!0});var m=M(e);t=C(m,"INPUT",{type:!0,name:!0,id:!0,class:!0}),n=j(m),p=C(m,"LABEL",{for:!0,class:!0});var _=M(p);d=C(_,"IMG",{src:!0,alt:!0,class:!0}),_.forEach(I),P=j(m),m.forEach(I),this.h()},h(){s(t,"type","radio"),s(t,"name","samples"),s(t,"id",r="sample-"+l[5]),t.value=a=l[5],t.disabled=o=l[0]===!0,s(t,"class","svelte-1gwcbp"),Re(d.src,k=ot+l[3])||s(d,"src",k),s(d,"alt",y=l[3]),s(d,"class","svelte-1gwcbp"),s(p,"for",b="sample-"+l[5]),s(p,"class","svelte-1gwcbp"),s(e,"class","snap-always snap-start")},m(g,m){Q(g,e,m),c(e,t),c(e,n),c(e,p),c(p,d),c(e,P)},p(g,m){m&1&&o!==(o=g[0]===!0)&&(t.disabled=o)},d(g){g&&I(e)}}}function pt(l){let e,t,r,a,o,n,p,d,k=je,y=[];for(let b=0;b<k.length;b+=1)y[b]=Je($e(l,k,b));return{c(){e=z("div"),t=z("h4"),r=G("Select a Template"),a=B(),o=z("form"),n=z("div");for(let b=0;b<y.length;b+=1)y[b].c();this.h()},l(b){e=C(b,"DIV",{});var P=M(e);t=C(P,"H4",{class:!0});var g=M(t);r=F(g,"Select a Template"),g.forEach(I),a=j(P),o=C(P,"FORM",{class:!0});var m=M(o);n=C(m,"DIV",{class:!0});var _=M(n);for(let i=0;i<y.length;i+=1)y[i].l(_);_.forEach(I),m.forEach(I),P.forEach(I),this.h()},h(){s(t,"class","font-bold mt-6 mb-2 my-6 leading-6"),s(n,"class","samples  svelte-1gwcbp"),s(o,"class","svelte-1gwcbp")},m(b,P){Q(b,e,P),c(e,t),c(t,r),c(e,a),c(e,o),c(o,n);for(let g=0;g<y.length;g+=1)y[g].m(n,null);p||(d=H(o,"input",l[1]),p=!0)},p(b,[P]){if(P&1){k=je;let g;for(g=0;g<k.length;g+=1){const m=$e(b,k,g);y[g]?y[g].p(m,P):(y[g]=Je(m),y[g].c(),y[g].m(n,null))}for(;g<y.length;g+=1)y[g].d(1);y.length=k.length}},i:W,o:W,d(b){b&&I(e),Le(y,b),p=!1,d()}}}async function dt(l){return new Promise((e,t)=>{const r=new Image;r.onload=()=>{URL.revokeObjectURL(r.src),e(r)},r.onerror=a=>{t(a)},r.src=URL.createObjectURL(l)})}function ft(l,e,t){let r,a;return J(l,Ne,n=>t(2,r=n)),J(l,we,n=>t(0,a=n)),[a,async n=>{n.preventDefault();const p=je[parseInt(n.target.value)];if(p){const d=await fetch(ot+p).then(y=>y.blob()),k=await dt(d);Z(Ne,r=k,r)}}]}class ht extends ne{constructor(e){super(),ie(this,e,ft,pt,ce,{})}}function Xe(l,e,t){const r=l.slice();return r[2]=e[t],r[7]=t,r}function Ke(l){let e,t,r,a,o,n,p,d,k,y,b,P,g=l[2].label+"",m,_,i;return{c(){e=z("div"),t=z("input"),n=B(),p=z("label"),d=be("svg"),k=be("rect"),b=B(),P=z("span"),m=G(g),i=B(),this.h()},l(h){e=C(h,"DIV",{class:!0});var f=M(e);t=C(f,"INPUT",{name:!0,type:!0,id:!0,class:!0}),n=j(f),p=C(f,"LABEL",{for:!0,class:!0});var u=M(p);d=ye(u,"svg",{width:!0,height:!0,viewBox:!0,class:!0});var v=M(d);k=ye(v,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),M(k).forEach(I),v.forEach(I),b=j(u),P=C(u,"SPAN",{class:!0});var E=M(P);m=F(E,g),E.forEach(I),u.forEach(I),i=j(f),f.forEach(I),this.h()},h(){s(t,"name","color"),t.checked=r=l[7]==st,s(t,"type","radio"),s(t,"id",a="color-"+l[7]),t.value=o=l[7],s(t,"class","svelte-1oy4poo"),s(k,"x","0"),s(k,"y","0"),s(k,"width","20"),s(k,"height","20"),s(k,"fill",y="rgb("+l[2].color.join(",")+")"),s(d,"width","20"),s(d,"height","20"),s(d,"viewBox","0 0 20 20"),s(d,"class","svelte-1oy4poo"),s(P,"class","svelte-1oy4poo"),s(p,"for",_="color-"+l[7]),s(p,"class","svelte-1oy4poo"),s(e,"class","snap-always snap-start")},m(h,f){Q(h,e,f),c(e,t),c(e,n),c(e,p),c(p,d),c(d,k),c(p,b),c(p,P),c(P,m),c(e,i)},p:W,d(h){h&&I(e)}}}function vt(l){let e,t,r,a,o,n,p,d,k,y,b,P,g,m=l[0].size+"",_,i,h,f=ze,u=[];for(let v=0;v<f.length;v+=1)u[v]=Ke(Xe(l,f,v));return{c(){e=z("form"),t=z("h4"),r=G("Brush Type"),a=B(),o=z("div");for(let v=0;v<u.length;v+=1)u[v].c();n=B(),p=z("h4"),d=G("Brush Size"),k=B(),y=z("div"),b=z("input"),P=B(),g=z("label"),_=G(m),this.h()},l(v){e=C(v,"FORM",{});var E=M(e);t=C(E,"H4",{class:!0});var w=M(t);r=F(w,"Brush Type"),w.forEach(I),a=j(E),o=C(E,"DIV",{class:!0,name:!0});var T=M(o);for(let D=0;D<u.length;D+=1)u[D].l(T);T.forEach(I),n=j(E),p=C(E,"H4",{class:!0});var x=M(p);d=F(x,"Brush Size"),x.forEach(I),k=j(E),y=C(E,"DIV",{class:!0});var S=M(y);b=C(S,"INPUT",{min:!0,max:!0,step:!0,name:!0,type:!0}),P=j(S),g=C(S,"LABEL",{class:!0,for:!0});var R=M(g);_=F(R,m),R.forEach(I),S.forEach(I),E.forEach(I),this.h()},h(){s(t,"class","font-bold mt-6 mb-2 leading-6 my-3"),s(o,"class","colors svelte-1oy4poo"),s(o,"name","colors"),s(p,"class","font-bold mt-6 mb-2 my-6 leading-6"),b.value="10",s(b,"min","1"),s(b,"max","150"),s(b,"step","1"),s(b,"name","brush"),s(b,"type","range"),s(g,"class","pl-2 svelte-1oy4poo"),s(g,"for","brush"),s(y,"class","brush svelte-1oy4poo")},m(v,E){Q(v,e,E),c(e,t),c(t,r),c(e,a),c(e,o);for(let w=0;w<u.length;w+=1)u[w].m(o,null);c(e,n),c(e,p),c(p,d),c(e,k),c(e,y),c(y,b),c(y,P),c(y,g),c(g,_),i||(h=H(e,"input",l[1]),i=!0)},p(v,[E]){if(E&0){f=ze;let w;for(w=0;w<f.length;w+=1){const T=Xe(v,f,w);u[w]?u[w].p(T,E):(u[w]=Ke(T),u[w].c(),u[w].m(o,null))}for(;w<u.length;w+=1)u[w].d(1);u.length=f.length}E&1&&m!==(m=v[0].size+"")&&Me(_,m)},i:W,o:W,d(v){v&&I(e),Le(u,v),i=!1,h()}}}const st=6;function mt(l,e,t){let r;J(l,ke,k=>t(0,r=k));const{color:a,label:o}=ze[st];let n=`rgb(${a.join(",")})`,p=40;return Z(ke,r={color:n,size:p,label:o},r),[r,async k=>{const y=k.target;if(y.name==="color"){const b=parseInt(y.value),{color:P,label:g}=ze[b];n=`rgb(${P.join(",")})`,Z(ke,r={color:n,size:p,label:g},r)}else y.name==="brush"&&(p=parseInt(y.value),Z(ke,r={color:n,size:p,label:o},r))},a]}class gt extends ne{constructor(e){super(),ie(this,e,mt,vt,ce,{})}}function Ze(l,e,t){const r=l.slice();return r[15]=e[t],r}function Qe(l){let e,t=l[15][1]+"",r,a,o;return{c(){e=z("option"),r=G(t),o=G("`"),this.h()},l(n){e=C(n,"OPTION",{});var p=M(e);r=F(p,t),p.forEach(I),o=F(n,"`"),this.h()},h(){e.__value=a=l[15][0],e.value=e.__value},m(n,p){Q(n,e,p),c(e,r),Q(n,o,p)},p:W,d(n){n&&I(e),n&&I(o)}}}function bt(l){let e,t,r,a,o,n,p,d,k,y,b,P,g,m,_,i,h,f,u,v,E,w,T,x,S,R,D,Y,K,X,re,$,V,le,ue,N,L,ee,_e,te=Ee,q=[];for(let A=0;A<te.length;A+=1)q[A]=Qe(Ze(l,te,A));return{c(){e=z("form"),t=z("h4"),r=G("Prompt"),a=B(),o=z("input"),p=B(),d=z("h4"),k=G("Modifier"),y=B(),b=z("input"),g=B(),m=z("select"),_=z("option"),i=G("preset");for(let A=0;A<q.length;A+=1)q[A].c();f=B(),u=z("h4"),v=G("Random Seed"),E=B(),w=z("input"),x=B(),S=z("button"),R=G("Random"),Y=B(),K=z("h4"),X=G("Sample Steps"),re=B(),$=z("div"),V=z("input"),ue=B(),N=z("label"),L=G(l[2]),this.h()},l(A){e=C(A,"FORM",{});var O=M(e);t=C(O,"H4",{class:!0});var U=M(t);r=F(U,"Prompt"),U.forEach(I),a=j(O),o=C(O,"INPUT",{name:!0,placeholder:!0,style:!0,class:!0}),p=j(O),d=C(O,"H4",{class:!0});var oe=M(d);k=F(oe,"Modifier"),oe.forEach(I),y=j(O),b=C(O,"INPUT",{name:!0,placeholder:!0,style:!0,class:!0}),g=j(O),m=C(O,"SELECT",{name:!0,class:!0});var pe=M(m);_=C(pe,"OPTION",{});var Ve=M(_);i=F(Ve,"preset"),Ve.forEach(I);for(let Te=0;Te<q.length;Te+=1)q[Te].l(pe);pe.forEach(I),f=j(O),u=C(O,"H4",{class:!0});var Ge=M(u);v=F(Ge,"Random Seed"),Ge.forEach(I),E=j(O),w=C(O,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0}),x=j(O),S=C(O,"BUTTON",{class:!0});var Fe=M(S);R=F(Fe,"Random"),Fe.forEach(I),Y=j(O),K=C(O,"H4",{class:!0});var He=M(K);X=F(He,"Sample Steps"),He.forEach(I),re=j(O),$=C(O,"DIV",{class:!0});var Ie=M($);V=C(Ie,"INPUT",{type:!0,name:!0,min:!0,max:!0,step:!0,class:!0}),ue=j(Ie),N=C(Ie,"LABEL",{class:!0,for:!0});var qe=M(N);L=F(qe,l[2]),qe.forEach(I),Ie.forEach(I),O.forEach(I),this.h()},h(){s(t,"class","font-bold mt-6 mb-2 my-6 leading-6"),s(o,"name","prompt"),s(o,"placeholder","Aerial view of ..., France."),o.disabled=n=l[6]===!0,Ye(o,"width","500px"),s(o,"class","svelte-7to72y"),s(d,"class","font-bold mt-6 mb-2 my-6 leading-6"),s(b,"name","modifier"),s(b,"placeholder","High resolution satellite image"),b.disabled=P=l[6]===!0,Ye(b,"width","500px"),s(b,"class","svelte-7to72y"),_.disabled=!0,_.selected=!0,_.__value="preset",_.value=_.__value,s(m,"name","presets"),m.disabled=h=l[6]===!0,s(m,"class","svelte-7to72y"),s(u,"class","font-bold mt-6 mb-2 my-6 leading-6"),s(w,"type","Number"),s(w,"name","seed"),s(w,"placeholder","Integer Seed"),w.disabled=T=l[6]===!0,s(w,"class","svelte-7to72y"),S.disabled=D=l[6]===!0,s(S,"class","svelte-7to72y"),s(K,"class","font-bold mt-6 mb-2 my-6 leading-6"),s(V,"type","range"),s(V,"name","steps"),s(V,"min","10"),s(V,"max","30"),s(V,"step","1"),V.disabled=le=l[6]===!0,s(V,"class","svelte-7to72y"),s(N,"class","pl-2 svelte-7to72y"),s(N,"for","steps"),s($,"class","flex")},m(A,O){Q(A,e,O),c(e,t),c(t,r),c(e,a),c(e,o),ae(o,l[3]),c(e,p),c(e,d),c(d,k),c(e,y),c(e,b),ae(b,l[4]),c(e,g),c(e,m),c(m,_),c(_,i);for(let U=0;U<q.length;U+=1)q[U].m(m,null);c(e,f),c(e,u),c(u,v),c(e,E),c(e,w),ae(w,l[1]),c(e,x),c(e,S),c(S,R),c(e,Y),c(e,K),c(K,X),c(e,re),c(e,$),c($,V),ae(V,l[2]),c($,ue),c($,N),c(N,L),l[14](e),ee||(_e=[H(o,"input",l[8]),H(b,"input",l[9]),H(m,"change",l[10]),H(w,"input",l[11]),H(S,"click",Pe(l[12])),H(V,"change",l[13]),H(V,"input",l[13]),H(e,"input",l[7])],ee=!0)},p(A,[O]){if(O&64&&n!==(n=A[6]===!0)&&(o.disabled=n),O&8&&o.value!==A[3]&&ae(o,A[3]),O&64&&P!==(P=A[6]===!0)&&(b.disabled=P),O&16&&b.value!==A[4]&&ae(b,A[4]),O&0){te=Ee;let U;for(U=0;U<te.length;U+=1){const oe=Ze(A,te,U);q[U]?q[U].p(oe,O):(q[U]=Qe(oe),q[U].c(),q[U].m(m,null))}for(;U<q.length;U+=1)q[U].d(1);q.length=te.length}O&64&&h!==(h=A[6]===!0)&&(m.disabled=h),O&64&&T!==(T=A[6]===!0)&&(w.disabled=T),O&2&&ae(w,A[1]),O&64&&D!==(D=A[6]===!0)&&(S.disabled=D),O&64&&le!==(le=A[6]===!0)&&(V.disabled=le),O&4&&ae(V,A[2]),O&4&&Me(L,A[2])},i:W,o:W,d(A){A&&I(e),Le(q,A),l[14](null),ee=!1,Ue(_e)}}}function yt(l,e,t){let r,a;J(l,Se,f=>t(5,r=f)),J(l,we,f=>t(6,a=f));function o(){const f=n.elements;Z(Se,r={prompt:f.prompt.value,modifier:f.modifier.value,seed:BigInt(f.seed.value),steps:parseInt(f.steps.value)},r)}let n,p=r.seed,d=r.steps,k=r.prompt,y=r.modifier;function b(){k=this.value,t(3,k)}function P(){y=this.value,t(4,y)}const g=f=>{const u=f.currentTarget.selectedIndex-1;t(4,y=Ee[u][0]),Z(Se,r.modifier=Ee[u][0],r)};function m(){p=this.value,t(1,p)}const _=()=>{t(1,p=at()),o()};function i(){d=it(this.value),t(2,d)}function h(f){Be[f?"unshift":"push"](()=>{n=f,t(0,n)})}return[n,p,d,k,y,r,a,o,b,P,g,m,_,i,h]}class wt extends ne{constructor(e){super(),ie(this,e,yt,bt,ce,{})}}let _t=(l=21)=>crypto.getRandomValues(new Uint8Array(l)).reduce((e,t)=>(t&=63,t<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");var xt=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function kt(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var nt={exports:{}};(function(l,e){(function(t,r){l.exports=r()})(typeof self!="undefined"?self:xt,function(){return function(t){var r={};function a(o){if(r[o])return r[o].exports;var n=r[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,a),n.l=!0,n.exports}return a.m=t,a.c=r,a.d=function(o,n,p){a.o(o,n)||Object.defineProperty(o,n,{enumerable:!0,get:p})},a.r=function(o){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},a.t=function(o,n){if(1&n&&(o=a(o)),8&n||4&n&&typeof o=="object"&&o&&o.__esModule)return o;var p=Object.create(null);if(a.r(p),Object.defineProperty(p,"default",{enumerable:!0,value:o}),2&n&&typeof o!="string")for(var d in o)a.d(p,d,function(k){return o[k]}.bind(null,d));return p},a.n=function(o){var n=o&&o.__esModule?function(){return o.default}:function(){return o};return a.d(n,"a",n),n},a.o=function(o,n){return Object.prototype.hasOwnProperty.call(o,n)},a.p="",a(a.s=0)}([function(t,r,a){function o(g,m){return function(_){if(Array.isArray(_))return _}(g)||function(_,i){if(Symbol.iterator in Object(_)||Object.prototype.toString.call(_)==="[object Arguments]"){var h=[],f=!0,u=!1,v=void 0;try{for(var E,w=_[Symbol.iterator]();!(f=(E=w.next()).done)&&(h.push(E.value),!i||h.length!==i);f=!0);}catch(T){u=!0,v=T}finally{try{f||w.return==null||w.return()}finally{if(u)throw v}}return h}}(g,m)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function n(g){return function(m){if(Array.isArray(m)){for(var _=0,i=new Array(m.length);_<m.length;_++)i[_]=m[_];return i}}(g)||function(m){if(Symbol.iterator in Object(m)||Object.prototype.toString.call(m)==="[object Arguments]")return Array.from(m)}(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(g,m){for(var _=0;_<m.length;_++){var i=m[_];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(g,i.key,i)}}a.r(r);var d=/^#?[0-9A-Fa-f]{1,2}[0-9A-Fa-f]{1,2}[0-9A-Fa-f]{1,2}$/,k=/^rgb\((\s+)?[0-9]{1,3},(\s+)?[0-9]{1,3},(\s+)?[0-9]{1,3}(\s+)?\)$/,y=function(){function g(){(function(i,h){if(!(i instanceof h))throw new TypeError("Cannot call a class as a function")})(this,g),this.canvases={}}var m,_;return m=g,(_=[{key:"parseColor",value:function(i){var h=d.test(i),f=k.test(i);if(!h&&!f)throw new Error("Color is not correct format. #123123 or rgb(123, 123, 123) format required.");if(h){var u=i[0]==="#"?i.slice(1):i;return u=u.length===3?u.split("").reduce(function(x,S){return[].concat(n(x),[S,S])},[]).join(""):u,{r:parseInt(u.slice(0,2),16),g:parseInt(u.slice(2,4),16),b:parseInt(u.slice(4,6),16)}}if(f){var v=o(i.replace(/rgb|\s+|\(|\)/g,"").split(",").map(function(x){return parseInt(x)}),3),E=v[0],w=v[1],T=v[2];return{r:E=E>255?255:E,g:w=w>255?255:w,b:T=T>255?255:T}}}},{key:"make",value:function(i){var h=i.size,f=i.color;try{h*=window.devicePixelRatio;var u=this.parseColor(f),v=JSON.stringify(u);if(this.canvases[v]=this.canvases[v]||{},this.canvases[v][h]!=null)return this.canvases[v][h];var E=document.createElement("canvas");h+=h%2,E.width=h,E.height=h;for(var w=E.getContext("2d"),T=w.createImageData(h,h),x=0;x<T.data.length;x+=4)T.data[x]=255,T.data[x+1]=255,T.data[x+2]=255,T.data[x+3]=0;return this.plotCircle(2*h,4*h*(h/2),h/2,T,h,u),this.fillCircle(T,u),w.putImageData(T,0,0),this.canvases[v][h]=E,E}catch(S){console.error(S)}}},{key:"plotCircle",value:function(i,h,f,u,v,E){var w=-f,T=0,x=2-2*f;do{var S=i-4*(w+1)+(h+4*v*(T-1));u.data[S+0]=E.r,u.data[S+1]=E.g,u.data[S+2]=E.b,u.data[S+3]=255;var R=i-T*(4*v)+(h-4*(w+1));u.data[R+0]=E.r,u.data[R+1]=E.g,u.data[R+2]=E.b,u.data[R+3]=255;var D=i+4*w+(h-T*(4*v));u.data[D+0]=E.r,u.data[D+1]=E.g,u.data[D+2]=E.b,u.data[D+3]=255;var Y=i+4*v*(T-1)+(h+4*w);u.data[Y+0]=E.r,u.data[Y+1]=E.g,u.data[Y+2]=E.b,u.data[Y+3]=255,(f=x)<=T&&(x+=2*++T+1),(f>w||x>T)&&(x+=2*++w+1)}while(w<0)}},{key:"fillCircle",value:function(i,h){for(var f=4*i.width,u=1;u<i.height-1;u+=1)for(var v=!1,E=!1,w=!1,T=0;T<f;T+=4){var x=f*u+T,S=i.data[x+3],R=S===255;R&&!v?v=!0:S===0&&v?E=!0:R&&v&&E&&(w=!0),v&&E&&!w&&(i.data[x]=h.r,i.data[x+1]=h.g,i.data[x+2]=h.b,i.data[x+3]=255)}}}])&&p(m.prototype,_),g}();function b(g,m){for(var _=0;_<m.length;_++){var i=m[_];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(g,i.key,i)}}var P=function(){function g(i){(function(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")})(this,g),this.canvas=i,this.context=i.getContext("2d"),this.stampMaker=new y,this.configPixelRatio()}var m,_;return m=g,(_=[{key:"configPixelRatio",value:function(){var i=this.canvas,h=i.width,f=i.height;this.canvas.width=h*this.dpr,this.canvas.height=f*this.dpr,this.canvas.style.width="".concat(h,"px"),this.canvas.style.height="".concat(f,"px"),this.context.scale(this.dpr,this.dpr),this.context.imageSmoothingEnabled=!1}},{key:"exportAsPNG",value:function(i){var h=this;return new Promise(function(f){var u=document.createElement("canvas"),v=u.getContext("2d"),E=h.canvas,w=E.width,T=E.height,x=w/h.dpr,S=T/h.dpr;u.width=x,u.height=S,v.imageSmoothingEnabled=!1,v.drawImage(h.canvas,0,0,w,T,0,0,x,S),u.toBlob(function(R){R.lastModifedDate=new Date,R.name=i,f(R)})})}},{key:"distanceBetween",value:function(i,h){return Math.sqrt(Math.pow(h.x-i.x,2)+Math.pow(h.y-i.y,2))}},{key:"angleBetween",value:function(i,h){return Math.atan2(h.x-i.x,h.y-i.y)}},{key:"draw",value:function(i){var h=i.from,f=i.to,u=i.size,v=i.color;this.context.globalCompositeOperation="source-over",this.brush({from:h,to:f,size:u,color:v})}},{key:"erase",value:function(i){var h=i.from,f=i.to,u=i.size;this.context.globalCompositeOperation="destination-out",this.brush({from:h,to:f,size:u,color:"#000000"})}},{key:"brush",value:function(i){var h=this,f=i.from,u=i.to,v=i.size,E=i.color,w=(v-v%2)/2,T=this.stampMaker.make({size:v,color:E});if(f.x!==u.x||f.y!==u.y)for(var x=this.distanceBetween(f,u),S=this.angleBetween(f,u),R=function(X){var re=f.x+Math.sin(S)*X-w,$=f.y+Math.cos(S)*X-w;window.requestAnimationFrame(function(){h.context.drawImage(T,Math.round(re),Math.round($),v,v)})},D=0;D<x;D+=1)R(D);else{var Y=f.x-w,K=f.y-w;this.context.drawImage(T,Math.round(Y),Math.round(K),v,v)}}},{key:"dpr",get:function(){return window.devicePixelRatio||1}}])&&b(m.prototype,_),g}();r.default=P}])})})(nt);var We=kt(nt.exports);function Et(l){let e,t;return{c(){e=be("svg"),t=be("path"),this.h()},l(r){e=ye(r,"svg",{xmlns:!0,width:!0,viewBox:!0,class:!0});var a=M(e);t=ye(a,"path",{fill:!0,stroke:!0,"stroke-width":!0,d:!0}),M(t).forEach(I),a.forEach(I),this.h()},h(){s(t,"fill","white"),s(t,"stroke","black"),s(t,"stroke-width","30"),s(t,"d","M480 256c0 123.4-100.5 223.9-223.9 223.9c-48.84 0-95.17-15.58-134.2-44.86c-14.12-10.59-16.97-30.66-6.375-44.81c10.59-14.12 30.62-16.94 44.81-6.375c27.84 20.91 61 31.94 95.88 31.94C344.3 415.8 416 344.1 416 256s-71.69-159.8-159.8-159.8c-37.46 0-73.09 13.49-101.3 36.64l45.12 45.14c17.01 17.02 4.955 46.1-19.1 46.1H35.17C24.58 224.1 16 215.5 16 204.9V59.04c0-24.04 29.07-36.08 46.07-19.07l47.6 47.63C149.9 52.71 201.5 32.11 256.1 32.11C379.5 32.11 480 132.6 480 256z"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"width","20"),s(e,"viewBox","0 0 512 512"),s(e,"class",l[0])},m(r,a){Q(r,e,a),c(e,t)},p(r,[a]){a&1&&s(e,"class",r[0])},i:W,o:W,d(r){r&&I(e)}}}function It(l,e,t){let{classNames:r=""}=e;return l.$$set=a=>{"classNames"in a&&t(0,r=a.classNames)},[r]}class St extends ne{constructor(e){super(),ie(this,e,It,Et,ce,{classNames:0})}}function Pt(l){var h;let e,t,r,a,o,n,p,d=((h=l[0])==null?void 0:h.label)+"",k,y,b,P,g,m,_,i;return P=new St({}),{c(){e=z("div"),t=z("div"),r=z("canvas"),a=B(),o=z("canvas"),n=B(),p=z("span"),k=G(d),y=B(),b=z("button"),de(P.$$.fragment),this.h()},l(f){e=C(f,"DIV",{});var u=M(e);t=C(u,"DIV",{class:!0});var v=M(t);r=C(v,"CANVAS",{class:!0,width:!0,height:!0}),M(r).forEach(I),a=j(v),o=C(v,"CANVAS",{class:!0,width:!0,height:!0}),M(o).forEach(I),n=j(v),p=C(v,"SPAN",{class:!0});var E=M(p);k=F(E,d),E.forEach(I),y=j(v),b=C(v,"BUTTON",{class:!0});var w=M(b);fe(P.$$.fragment,w),w.forEach(I),v.forEach(I),u.forEach(I),this.h()},h(){s(r,"class","canvas svelte-vhujxn"),s(r,"width","512"),s(r,"height","512"),s(o,"class","brush svelte-vhujxn"),s(o,"width","10"),s(o,"height","10"),s(p,"class","label svelte-vhujxn"),s(b,"class","absolute bottom-0 left-0 p-3"),b.disabled=g=l[3].size<=0,s(t,"class","relative overflow-clip")},m(f,u){Q(f,e,u),c(e,t),c(t,r),l[11](r),c(t,a),c(t,o),l[12](o),c(t,n),c(t,p),c(p,k),c(t,y),c(t,b),he(P,b,null),m=!0,_||(i=[H(r,"touchmove",Ct),H(r,"pointerenter",zt),H(r,"pointerup",l[4]),H(r,"pointerleave",l[4]),H(r,"pointercancel",l[4]),H(r,"pointerout",l[4]),H(r,"pointermove",l[6]),H(r,"pointerdown",l[5]),H(b,"click",Pe(l[13]))],_=!0)},p(f,[u]){var v;(!m||u&1)&&d!==(d=((v=f[0])==null?void 0:v.label)+"")&&Me(k,d),(!m||u&8&&g!==(g=f[3].size<=0))&&(b.disabled=g)},i(f){m||(ve(P.$$.fragment,f),m=!0)},o(f){me(P.$$.fragment,f),m=!1},d(f){f&&I(e),l[11](null),l[12](null),ge(P),_=!1,Ue(i)}}}function zt(){}function et(l,e){const t=l.getBoundingClientRect();return{x:(e.clientX-t.left)*(l.width/t.width),y:(e.clientY-t.top)*(l.height/t.height)}}function tt(l){l.fillStyle="#46e483",l.fillRect(0,0,l.canvas.width,l.canvas.height)}function Oe(l,e){l.drawImage(e,0,0,l.canvas.width,l.canvas.height)}const Ct=l=>l.preventDefault();function Mt(l,e,t){let r,a,o,n;J(l,xe,x=>t(3,r=x)),J(l,Ne,x=>t(10,a=x)),J(l,ke,x=>t(0,o=x)),J(l,De,x=>t(18,n=x));let p,d,k,y,b={x:0,y:0},P;ct(()=>{t(9,y=p.getContext("2d")),t(8,k=d.getContext("2d")),window.devicePixelRatio=1,P=new We(p),t(1,p.style.height="unset",p),t(1,p.style.width="unset",p),Z(De,n=p,n),tt(y)});let g=!1,m;function _(){t(2,d.style.top=`${10+o.size/2}px`,d),t(2,d.style.left=`${10+o.size/2}px`,d),g=!1}function i(x){g=!0,b=et(p,x),P.draw({from:b,to:b,size:o.size,color:o.color}),m=_t(),xe.update(S=>(S.set(m,{brush:o,points:[{from:b,to:b}]}),S))}function h(x){const S=et(p,x);t(2,d.style.top=`${x.offsetY}px`,d),t(2,d.style.left=`${x.offsetX}px`,d),g&&(P.draw({from:b,to:S,size:o.size,color:o.color}),xe.update(R=>{const D=R.get(m);return D==null||D.points.push({from:b,to:S}),R}),b=S)}function f(x){const{size:S,color:R}=x;t(2,d.width=S,d),t(2,d.height=S,d),t(8,k.fillStyle=R,k),k.arc(S/2,S/2,S/2,0,2*Math.PI),k.fill()}function u(){if(r.size<=0)return;const x=Array.from(r.keys());xe.update(S=>(S.delete(x[x.length-1]),S)),v(y)}function v(x){const S=document.createElement("canvas");S.width=512,S.height=512,window.devicePixelRatio=1;const R=new We(S);tt(x),a&&Oe(x,a),Array.from(r.values()).forEach(D=>{D.points.forEach((Y,K)=>{R.draw({from:Y.from,to:Y.to,size:D.brush.size,color:D.brush.color})})}),requestAnimationFrame(()=>{Oe(x,S)})}function E(x){Be[x?"unshift":"push"](()=>{p=x,t(1,p)})}function w(x){Be[x?"unshift":"push"](()=>{d=x,t(2,d),t(8,k),t(0,o)})}const T=()=>u();return l.$$.update=()=>{l.$$.dirty&257&&k&&o&&(f(o),t(2,d.style.top=`${10+o.size/2}px`,d),t(2,d.style.left=`${10+o.size/2}px`,d)),l.$$.dirty&1536&&a&&(Oe(y,a),Z(xe,r=new Map,r))},[o,p,d,r,_,i,h,u,k,y,a,E,w,T]}class Tt extends ne{constructor(e){super(),ie(this,e,Mt,Pt,ce,{})}}function rt(l){let e,t,r;return{c(){e=z("img"),this.h()},l(a){e=C(a,"IMG",{class:!0,alt:!0,src:!0,width:!0,height:!0}),this.h()},h(){s(e,"class",t="image "+(l[1]?"opacity-30":"")+" svelte-1t0h0rs"),s(e,"alt","Generative Map Result"),Re(e.src,r=l[0])||s(e,"src",r),s(e,"width","512"),s(e,"height","512")},m(a,o){Q(a,e,o)},p(a,o){o&2&&t!==(t="image "+(a[1]?"opacity-30":"")+" svelte-1t0h0rs")&&s(e,"class",t),o&1&&!Re(e.src,r=a[0])&&s(e,"src",r)},d(a){a&&I(e)}}}function lt(l){let e,t,r,a,o,n;return{c(){e=z("div"),t=be("svg"),r=be("path"),a=B(),o=z("span"),n=G(l[2]),this.h()},l(p){e=C(p,"DIV",{class:!0});var d=M(e);t=ye(d,"svg",{xmlns:!0,fill:!0,viewBox:!0,class:!0});var k=M(t);r=ye(k,"path",{fill:!0,d:!0}),M(r).forEach(I),k.forEach(I),a=j(d),o=C(d,"SPAN",{class:!0});var y=M(o);n=F(y,l[2]),y.forEach(I),d.forEach(I),this.h()},h(){s(r,"fill","currentColor"),s(r,"d","M20 12a8 8 0 0 1-8 8v4a12 12 0 0 0 12-12h-4Zm-2-5.3a8 8 0 0 1 2 5.3h4c0-3-1.1-5.8-3-8l-3 2.7Z"),s(t,"xmlns","http://www.w3.org/2000/svg"),s(t,"fill","none"),s(t,"viewBox","0 0 24 24"),s(t,"class","animate-spin max-w-[3rem]"),s(o,"class","text-xs"),s(e,"class","loading svelte-1t0h0rs")},m(p,d){Q(p,e,d),c(e,t),c(t,r),c(e,a),c(e,o),c(o,n)},p(p,d){d&4&&Me(n,p[2])},d(p){p&&I(e)}}}function Ot(l){let e,t,r=l[0]&&rt(l),a=l[1]&&lt(l);return{c(){e=z("div"),r&&r.c(),t=B(),a&&a.c(),this.h()},l(o){e=C(o,"DIV",{class:!0});var n=M(e);r&&r.l(n),t=j(n),a&&a.l(n),n.forEach(I),this.h()},h(){s(e,"class","relative overflow-clip flex flex-col justify-center items-center w-full h-full")},m(o,n){Q(o,e,n),r&&r.m(e,null),c(e,t),a&&a.m(e,null)},p(o,[n]){o[0]?r?r.p(o,n):(r=rt(o),r.c(),r.m(e,t)):r&&(r.d(1),r=null),o[1]?a?a.p(o,n):(a=lt(o),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i:W,o:W,d(o){o&&I(e),r&&r.d(),a&&a.d()}}}async function Rt(l){return new Promise((e,t)=>{try{const r=document.createElement("a");r.download=`sucess-${Date.now()}.png`,r.target="_self",r.onclick=async a=>{r.href&&URL.revokeObjectURL(r.href),r.href=l},requestAnimationFrame(()=>{console.log("Downloading image."),r.click(),e(null)})}catch{t()}})}function Bt(l,e,t){let r,a,o,n,p;J(l,Ce,y=>t(3,r=y)),J(l,Ae,y=>t(0,a=y)),J(l,we,y=>t(1,o=y)),J(l,Se,y=>t(4,n=y)),J(l,De,y=>t(5,p=y));let d="";async function k(y,{prompt:b,modifier:P,steps:g,seed:m}){const _=ut,i=typeof g=="bigint"?g.toString():g,h=typeof m=="bigint"?m.toString():m,f={inputs:b+". "+P,prompt:b+". "+P,image:y,steps:i,seed:h},u=await fetch(_,{method:"POST",headers:{"Content-Type":"application/json",Accept:"image/png"},body:JSON.stringify(f)});console.log(u);const v=await u.blob();return URL.createObjectURL(v)}return l.$$.update=()=>{l.$$.dirty&50&&(async()=>{if(o){t(2,d="Generating...");const y=await k(p.toDataURL().split(",")[1],n);Z(Ae,a=y,a),Z(we,o=!1,o)}})(),l.$$.dirty&9&&(async()=>r&&(await Rt(a),Z(Ce,r=!1,r)))()},[a,o,d,r,n,p]}class jt extends ne{constructor(e){super(),ie(this,e,Bt,Ot,ce,{})}}function At(l){let e,t,r,a,o,n,p,d,k,y,b,P,g,m,_,i,h,f,u,v,E,w,T,x,S,R,D,Y,K,X,re,$,V,le,ue;return _=new gt({}),f=new Tt({}),v=new jt({}),X=new ht({}),$=new wt({}),{c(){e=z("div"),t=z("article"),r=z("h1"),a=G("Drawing to Map"),o=B(),n=z("p"),p=G("This space is for the ControlNet model "),d=z("a"),k=z("span"),y=G("Seg2Sat"),b=B(),P=z("p"),g=G("If you don't get your result in a few seconds after query, wait 2minutes and come back. GPU time is expensive"),m=B(),de(_.$$.fragment),i=B(),h=z("div"),de(f.$$.fragment),u=B(),de(v.$$.fragment),E=B(),w=z("button"),T=G("Generate Map"),S=B(),R=z("button"),D=G("Save Result"),K=B(),de(X.$$.fragment),re=B(),de($.$$.fragment),this.h()},l(N){e=C(N,"DIV",{class:!0});var L=M(e);t=C(L,"ARTICLE",{class:!0});var ee=M(t);r=C(ee,"H1",{});var _e=M(r);a=F(_e,"Drawing to Map"),_e.forEach(I),o=j(ee),n=C(ee,"P",{});var te=M(n);p=F(te,"This space is for the ControlNet model "),d=C(te,"A",{href:!0,target:!0});var q=M(d);k=C(q,"SPAN",{});var A=M(k);y=F(A,"Seg2Sat"),A.forEach(I),q.forEach(I),te.forEach(I),b=j(ee),P=C(ee,"P",{});var O=M(P);g=F(O,"If you don't get your result in a few seconds after query, wait 2minutes and come back. GPU time is expensive"),O.forEach(I),ee.forEach(I),m=j(L),fe(_.$$.fragment,L),i=j(L),h=C(L,"DIV",{class:!0});var U=M(h);fe(f.$$.fragment,U),u=j(U),fe(v.$$.fragment,U),U.forEach(I),E=j(L),w=C(L,"BUTTON",{class:!0});var oe=M(w);T=F(oe,"Generate Map"),oe.forEach(I),S=j(L),R=C(L,"BUTTON",{class:!0});var pe=M(R);D=F(pe,"Save Result"),pe.forEach(I),K=j(L),fe(X.$$.fragment,L),re=j(L),fe($.$$.fragment,L),L.forEach(I),this.h()},h(){s(d,"href","https://github.com/RubenGres/Seg2Sat"),s(d,"target","_blank"),s(t,"class","prose"),s(h,"class","drawings py-3 -mx-3 svelte-1sy339h"),w.disabled=x=l[0]===!0,s(w,"class","green svelte-1sy339h"),R.disabled=Y=l[1]===!0||!l[2],s(R,"class","svelte-1sy339h"),s(e,"class","max-w-screen-md mx-auto px-3 py-5 relative z-0")},m(N,L){Q(N,e,L),c(e,t),c(t,r),c(r,a),c(t,o),c(t,n),c(n,p),c(n,d),c(d,k),c(k,y),c(t,b),c(t,P),c(P,g),c(e,m),he(_,e,null),c(e,i),c(e,h),he(f,h,null),c(h,u),he(v,h,null),c(e,E),c(e,w),c(w,T),c(e,S),c(e,R),c(R,D),c(e,K),he(X,e,null),c(e,re),he($,e,null),V=!0,le||(ue=[H(w,"click",Pe(l[3])),H(R,"click",Pe(l[4]))],le=!0)},p(N,[L]){(!V||L&1&&x!==(x=N[0]===!0))&&(w.disabled=x),(!V||L&6&&Y!==(Y=N[1]===!0||!N[2]))&&(R.disabled=Y)},i(N){V||(ve(_.$$.fragment,N),ve(f.$$.fragment,N),ve(v.$$.fragment,N),ve(X.$$.fragment,N),ve($.$$.fragment,N),V=!0)},o(N){me(_.$$.fragment,N),me(f.$$.fragment,N),me(v.$$.fragment,N),me(X.$$.fragment,N),me($.$$.fragment,N),V=!1},d(N){N&&I(e),ge(_),ge(f),ge(v),ge(X),ge($),le=!1,Ue(ue)}}}function Dt(l,e,t){let r,a,o;return J(l,we,d=>t(0,r=d)),J(l,Ce,d=>t(1,a=d)),J(l,Ae,d=>t(2,o=d)),[r,a,o,()=>Z(we,r=!0,r),()=>Z(Ce,a=!0,a)]}class Ut extends ne{constructor(e){super(),ie(this,e,Dt,At,ce,{})}}export{Ut as default};
